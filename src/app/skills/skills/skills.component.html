<app-common-loader *ngIf="pageProperties.isLoading"></app-common-loader>
<div class="container">
  <app-common-header [headerDetails]="skillGroupHeader" (ButtonClickEvent)="eventHandle($event)"></app-common-header>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="listDataSource">
      <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef>No</th>
        <td mat-cell *matCellDef="let element">{{ element.index }}</td>
      </ng-container>
      <ng-container matColumnDef="imageUrl">
        <th mat-header-cell *matHeaderCellDef>Image</th>
        <td mat-cell *matCellDef="let element">{{ element.imageUrl }}</td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let element">{{ element.description }}</td>
      </ng-container>
      <ng-container matColumnDef="Actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let element">
        <button mat-icon-button (click)="editSkillGroup(element)"><mat-icon>edit</mat-icon></button>
        <button mat-icon-button (click)="deleteSkillGroup(element?._id)"><mat-icon class="delete_icon">delete</mat-icon></button>
      </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>

<ng-template #addSkillGroupTemplate>
  <form [formGroup]="skillGroupForm">
  <div style="padding: 5%;padding-top: 1%;" fxLayout="column" fxLayoutGap="3%">
    <div class="header" fxLayoutAlign="space-between center" style="">
      <h3>{{isEdit?'Edit':'Add'}} SkillGroup</h3>
      <mat-icon style="color:red;cursor: pointer;" (click)="closeDialog()">close</mat-icon>
    </div>
    <div
      style="
        border: 2px dotted grey;
        width: 100%;
        height: 150px;
      "
      fxLayout="column"
      fxLayoutAlign="center center"
    >
      <mat-icon
        style="
          width: 50px;
          font-size: 50px;
          height: 50px;
          color: var(--primary-color);
        ">upload</mat-icon
      >
      <h4 style="margin: 0">Add Skillgroup Image</h4>
    </div>
    <div
      fxLayout="column"
      fxLayoutAlign="center center"
      style="width: 100%"
    >
      <mat-form-field appearance="outline" style="width: 100%">
        <mat-label>skill group name</mat-label>
        <input
          matInput
          placeholder="eg:frontend/backend"
          formControlName="name"
        />
      </mat-form-field>
      <mat-form-field appearance="outline" style="width: 100%">
        <mat-label>Skill group description  </mat-label>
        <textarea matInput rows="5" formControlName="description"></textarea>
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutAlign="center center">
      <button
        mat-raised-button
        class="primary-button" (click)="saveSkillGroup()" [disabled]="!skillGroupForm.valid || pageProperties.buttonLoading"
      >
    <mat-spinner *ngIf="pageProperties.buttonLoading" style="width: 20px;"></mat-spinner>
        <span *ngIf="!pageProperties.buttonLoading" >{{isEdit?'Update':'Save'}}</span>
      </button>
    </div>
  </div>
  </form>
</ng-template>
